# Proposal: Implement GIS Measure Tools

## Summary
实现TopRibbon中的空间测距和面积测量工具，提供交互式的地图测量功能，包括实时预览、历史记录管理和可选的后端持久化。

## Motivation
GIS测量是数字孪生平台的基础功能，用户需要在地图上测量距离和面积以支持工程规划、灾害评估等决策。当前TopRibbon中的测距和测面按钮没有实现功能。

## Scope
- **IN**:
  - 两点测距工具（含预览线、圆周辅助）
  - 多边形面积测量工具（双击结束绘制）
  - 测量结果管理（新增、删除、历史记录）
  - 测量结果UI展示面板
  - 可选：后端API保存/加载测量记录
- **OUT**:
  - 地形剖面工具（后续proposal）
  - 淹没分析工具（后续proposal）
  - 离线数据导出

## Approach

### 测距工具交互流程：
1. 点击测距按钮激活工具
2. 点击地图设置起点，显示起点标记
3. 鼠标移动：显示动态预览线 + 以起点为圆心的圆周
4. 再次点击设置终点，完成测量
5. 显示测量结果（距离值标注在线段中点）
6. 可继续新增测量或删除已有测量

### 面积测量交互流程：
1. 点击面积按钮激活工具
2. 依次点击顶点绘制多边形
3. 鼠标移动时预览闭合效果
4. 双击完成绘制
5. 显示面积值（标注在多边形中心）

## Dependencies
- Cesium store (existing)
- TopRibbon component (existing)
- 后端API（可选，用于持久化）

## Risks
- Cesium拾取坐标精度问题 → 使用`scene.pickPosition`配合地形
- 移动端触控支持 → 当前仅支持桌面端鼠标交互
- 大量测量记录性能 → 限制最大记录数（如50条）
